host: MPLCLTMP0423.local
Building DAG of jobs...
Using shell: /opt/homebrew/bin/bash
Provided cores: 4
Rules claiming more threads will be scaled down.
Job stats:
job                   count
------------------  -------
all                       1
treetime_ancestral        1
treetime_clock            1
total                     3

Select jobs to execute...
Execute 2 jobs...

[Tue Mar 11 00:47:49 2025]
Job 6: 
        Verifiying molecular clock signal
        Sample : alpha
        
Reason: Missing output files: results/treetime_clock/alpha_tree/root_to_tip_regression.pdf

Activating conda environment: .snakemake/conda/38bd8cbf87b99d167db693ab77b559e9_

[Tue Mar 11 00:47:49 2025]
Job 7: 
        Inferring ancestral sequences using treetime
        Sample : alpha
        
Reason: Missing output files: results/treetime_ancestral/alpha_tree/timetree.nexus

Activating conda environment: .snakemake/conda/38bd8cbf87b99d167db693ab77b559e9_
ImproperOutputException in rule treetime_clock in file /Users/armel001/Documents/Workflow_template/workflow/rules/treetime_clock_testing.smk, line 1:
Outputs of incorrect type (directories when expecting files or vice versa). Output directories must be flagged with directory(). for rule treetime_clock:
    output: results/treetime_clock/alpha_tree, results/alpha_final_tree, results/treetime_clock/alpha_tree/root_to_tip_regression.pdf
    wildcards: sample=alpha
    affected files:
        results/alpha_final_tree
Removing output files of failed job treetime_clock since they might be corrupted:
results/treetime_clock/alpha_tree, results/alpha_final_tree, results/treetime_clock/alpha_tree/root_to_tip_regression.pdf
RuleException:
CalledProcessError in file /Users/armel001/Documents/Workflow_template/workflow/rules/treetime_ancestral.smk, line 23:
Command 'source /Users/armel001/miniforge3/bin/activate '/Users/armel001/Documents/Workflow_template/.snakemake/conda/38bd8cbf87b99d167db693ab77b559e9_'; set -euo pipefail;  
        treetime --aln results/alignment/alpha_aligned.fasta         --tree results/phylogenetic_tree/alpha_tree/alpha_aligned_trimmed.fasta.treefile           --dates results/metadata_concat/alpha_metadata.tsv             --clock-rate 0.008         --clock-std-dev 0.0035         --outdir results/treetime_ancestral/alpha_tree         --confidence
        && mv results/treetime_ancestral/alpha_tree/timetree.nexus "results/final_tree/alpha_timetree.nexus"
        && echo 'Time scale phylogenetic tree constructed alpha' >> results/log/alpha_aligned_trimmed_tree_ancestral.log' returned non-zero exit status 2.
[Tue Mar 11 00:49:47 2025]
Error in rule treetime_ancestral:
    jobid: 7
    input: results/phylogenetic_tree/alpha_tree/alpha_aligned_trimmed.fasta.treefile, results/alignment/alpha_aligned.fasta, results/metadata_concat/alpha_metadata.tsv
    output: results/treetime_ancestral/alpha_tree, results/treetime_ancestral/alpha_tree/timetree.nexus
    log: results/log/alpha_aligned_trimmed_tree_ancestral.log (check log file(s) for error details)
    conda-env: /Users/armel001/Documents/Workflow_template/.snakemake/conda/38bd8cbf87b99d167db693ab77b559e9_
    shell:
        
        treetime --aln results/alignment/alpha_aligned.fasta         --tree results/phylogenetic_tree/alpha_tree/alpha_aligned_trimmed.fasta.treefile           --dates results/metadata_concat/alpha_metadata.tsv             --clock-rate 0.008         --clock-std-dev 0.0035         --outdir results/treetime_ancestral/alpha_tree         --confidence
        && mv results/treetime_ancestral/alpha_tree/timetree.nexus "results/final_tree/alpha_timetree.nexus"
        && echo 'Time scale phylogenetic tree constructed alpha' >> results/log/alpha_aligned_trimmed_tree_ancestral.log
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job treetime_ancestral since they might be corrupted:
results/treetime_ancestral/alpha_tree, results/treetime_ancestral/alpha_tree/timetree.nexus
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2025-03-11T004747.861199.snakemake.log
WorkflowError:
At least one job did not complete successfully.
