host: MPLCLTMP0423.local
Building DAG of jobs...
Using shell: /opt/homebrew/bin/bash
Provided cores: 4
Rules claiming more threads will be scaled down.
Conda environments: ignored
Job stats:
job                       count
----------------------  -------
alignment                     1
all                           1
events_extaction              1
fasta_concatenation           1
initial_tree                  1
mask_alignment                1
metadata_concatenation        1
treetime_clock                1
treetime_mugration            1
treetime_timescale            1
total                        10

Select jobs to execute...
Execute 2 jobs...

[Fri May 16 19:41:35 2025]
Job 4: 
        Concatenating query and background FASTA files and removing duplicates
        Samples : alpha
        
Reason: Missing output files: results/00_Dataset/alpha_msa_rmdup.fasta


[Fri May 16 19:41:35 2025]
Job 6: 
        Concatenating query and background metadata files
        Samples : alpha
        
Reason: Missing output files: results/00_Dataset/alpha_metadata.tsv

[Fri May 16 19:41:35 2025]
Finished job 6.
1 of 10 steps (10%) done
[Fri May 16 19:41:35 2025]
Finished job 4.
2 of 10 steps (20%) done
Select jobs to execute...
Execute 1 jobs...

[Fri May 16 19:41:35 2025]
Job 3: 
        Aligning the concatenated FASTA file
        Sample : alpha
        
Reason: Missing output files: results/01_Alignment/alpha_aligned.fasta; Input files updated by another job: results/00_Dataset/alpha_msa_rmdup.fasta

[Fri May 16 19:42:06 2025]
Finished job 3.
3 of 10 steps (30%) done
Select jobs to execute...
Execute 1 jobs...

[Fri May 16 19:42:06 2025]
Job 2: 
        Masking and trimming the alignment using Gblocks
        Sample : alpha
        
Reason: Missing output files: results/01_Alignment/alpha_aligned_trimmed.fasta; Input files updated by another job: results/01_Alignment/alpha_aligned.fasta

[Fri May 16 19:42:09 2025]
Finished job 2.
4 of 10 steps (40%) done
Select jobs to execute...
Execute 1 jobs...

[Fri May 16 19:42:09 2025]
Job 1: 
        Building a phylogenetic tree using IQ-TREE
        Sample : alpha
        
Reason: Missing output files: results/02_Phylogenetic_tree/alpha_tree/alpha_aligned_trimmed.fasta.treefile; Input files updated by another job: results/01_Alignment/alpha_aligned_trimmed.fasta

[Fri May 16 19:43:01 2025]
Finished job 1.
5 of 10 steps (50%) done
Select jobs to execute...
Execute 2 jobs...

[Fri May 16 19:43:01 2025]
Job 9: 
        Verifiying molecular clock signal
        Sample : alpha
        
Reason: Missing output files: results/99_FINAL_REPORT/alpha_root_to_tip_regression.pdf; Input files updated by another job: results/00_Dataset/alpha_metadata.tsv, results/02_Phylogenetic_tree/alpha_tree/alpha_aligned_trimmed.fasta.treefile


[Fri May 16 19:43:01 2025]
Job 8: 
        Inferring time-scale phylogenetic tree using treetime
        Sample : alpha
        
Reason: Missing output files: results/99_FINAL_REPORT/alpha_timetree.nexus; Input files updated by another job: results/00_Dataset/alpha_metadata.tsv, results/02_Phylogenetic_tree/alpha_tree/alpha_aligned_trimmed.fasta.treefile, results/01_Alignment/alpha_aligned.fasta

[Fri May 16 19:43:04 2025]
Finished job 9.
6 of 10 steps (60%) done
[Fri May 16 19:44:17 2025]
Finished job 8.
7 of 10 steps (70%) done
Select jobs to execute...
Execute 1 jobs...

[Fri May 16 19:44:17 2025]
Job 7: 
        Place Attribute to each tip in the tree
        Sample : alpha
        
Reason: Missing output files: results/05_Treetime_mugration/alpha_tree/annotated_tree.nexus; Input files updated by another job: results/99_FINAL_REPORT/alpha_timetree.nexus, results/00_Dataset/alpha_metadata.tsv

RuleException:
CalledProcessError in file /Users/armel001/git/ViralPhyloDyna/workflow/rules/treetime_mugration.smk, line 22:
Command 'set -euo pipefail;  
        mkdir -p results/05_Treetime_mugration/alpha_tree
        treetime mugration         --tree results/99_FINAL_REPORT/alpha_timetree.nexus           --states results/00_Dataset/alpha_metadata.tsv             --attribute country         --outdir results/05_Treetime_mugration/alpha_tree         --confidence
        echo 'Migration phylogenetic tree constructed alpha' >> results/log/alpha_aligned_trimmed_tree_ancestral.log results/log/alpha_aligned_trimmed_tree_ancestral.txt
        cp results/05_Treetime_mugration/alpha_tree/annotated_tree.nexus results/99_FINAL_REPORT/alpha_annotated_tree.nexus' returned non-zero exit status 1.
[Fri May 16 19:44:18 2025]
Error in rule treetime_mugration:
    jobid: 7
    input: results/99_FINAL_REPORT/alpha_timetree.nexus, results/00_Dataset/alpha_metadata.tsv
    output: results/05_Treetime_mugration/alpha_tree, results/05_Treetime_mugration/alpha_tree/annotated_tree.nexus, results/99_FINAL_REPORT/alpha_annotated_tree.nexus
    log: results/log/alpha_aligned_trimmed_tree_ancestral.log, results/log/alpha_aligned_trimmed_tree_ancestral.txt (check log file(s) for error details)
    conda-env: /Users/armel001/git/ViralPhyloDyna/.snakemake/conda/536e7ea08fd52202b5e3036f451a74b9_
    shell:
        
        mkdir -p results/05_Treetime_mugration/alpha_tree
        treetime mugration         --tree results/99_FINAL_REPORT/alpha_timetree.nexus           --states results/00_Dataset/alpha_metadata.tsv             --attribute country         --outdir results/05_Treetime_mugration/alpha_tree         --confidence
        echo 'Migration phylogenetic tree constructed alpha' >> results/log/alpha_aligned_trimmed_tree_ancestral.log results/log/alpha_aligned_trimmed_tree_ancestral.txt
        cp results/05_Treetime_mugration/alpha_tree/annotated_tree.nexus results/99_FINAL_REPORT/alpha_annotated_tree.nexus
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job treetime_mugration since they might be corrupted:
results/05_Treetime_mugration/alpha_tree
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2025-05-16T194133.724180.snakemake.log
WorkflowError:
At least one job did not complete successfully.
